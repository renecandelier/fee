{"version":3,"sources":["AppInstall.js","AppMain.js","App.js","reportWebVitals.js","index.js"],"names":["redirectUri","window","location","origin","shopOrigin","URL","href","searchParams","get","permissionUrl","process","app","createApp","apiKey","AppInstall","top","self","assign","Redirect","create","dispatch","Action","REMOTE","Component","FEE_LINE_ITEM_TITLE","cart","Cart","cartUpdatedHandler","subscribe","UPDATE","payload","lineItems","data","feeLineItemIndex","feeLineItem","subtotal","map","item","index","title","price","REMOVE_LINE_ITEM","ADD_LINE_ITEM","parseFloat","quantity","taxable","Pos","ActionType","CLOSE","FETCH","AppMain","App","path","component","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"4PAIMA,EAAW,UAAMC,OAAOC,SAASC,OAAtB,SAEXC,EADa,IAAIC,IAAIJ,OAAOC,SAASI,MACbC,aAAaC,IAAI,QACzCC,EAAa,kBAAcL,EAAd,4CAA4DM,mCAA5D,uEAAwJV,GAErKW,EAAMC,IAAU,CAClBC,OAAQH,mCACRN,WAAYA,IAGKU,E,uKACjB,WACQb,OAAOc,MAAQd,OAAOe,KACtBf,OAAOC,SAASe,OAAOR,GAEvBS,WAASC,OAAOR,GAAKS,SAASF,WAASG,OAAOC,OAAQb,K,oBAI9D,WACI,OACI,4B,GAX4Bc,aCTlCnB,EADa,IAAIC,IAAIJ,OAAOC,SAASI,MACbC,aAAaC,IAAI,QAEzCG,EAAMC,IAAU,CAClBC,OAAQH,mCACRN,WAAYA,IAGVoB,EAAsB,aAItBC,EAAOC,OAAKP,OAAOR,GAEnBgB,EAAqBF,EAAKG,UAAUF,OAAKL,OAAOQ,QAAQ,SAAUC,GACpEH,IAEA,IAAMI,EAAYD,EAAQE,KAAKD,UAG3BE,GAAoB,EACpBC,EAAc,KACdC,EAAWL,EAAQE,KAAKG,SAC5BJ,EAAUK,KAAI,SAACC,EAAMC,GACjB,GAAID,EAAKE,QAAUf,EAGf,OAFAS,EAAmBK,EACnBJ,EAAcG,GACP,KAKXJ,GAAoB,IACpBE,GAAsBD,EAAYM,MAClCf,EAAKL,SAASM,OAAKL,OAAOoB,iBAAkB,CACxCH,MAAOL,KAIfR,EAAKL,SAASM,OAAKL,OAAOqB,cAAe,CACrCV,KAAM,CACFQ,MAhCQ,IAgCDG,WAAWR,GAClBS,SAAU,EACVL,MAAOf,EACPqB,SAAS,KAKLC,MAAI3B,OAAOR,GACnBS,SAAS0B,MAAIC,WAAWC,UAEhCvB,EAAKL,SAASM,OAAKL,OAAO4B,O,IAELC,E,4JACjB,WACI,OACI,4B,GAHyB3B,aChDtB,SAAS4B,IACtB,OACE,cAAC,IAAD,UACE,8BAGE,eAAC,IAAD,WACE,cAAC,IAAD,CAAOC,KAA+B,WAAYC,UAAWvC,IAC7D,cAAC,IAAD,CAAOsC,KAA+B,QAASC,UAAWH,WClBpE,IAYeI,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,8BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,OCDdQ,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAACd,EAAD,MAEFe,SAASC,eAAe,SAM1Bb,K","file":"static/js/main.5fe54610.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport createApp from '@shopify/app-bridge';\nimport { Redirect } from '@shopify/app-bridge/actions';\n\nconst redirectUri = `${window.location.origin}/cart`;\nconst requestUrl = new URL(window.location.href);\nconst shopOrigin = requestUrl.searchParams.get('shop');\nconst permissionUrl = `https://${shopOrigin}/admin/oauth/authorize?client_id=${process.env.REACT_APP_API_KEY}&scope=read_orders,write_products,write_orders&redirect_uri=${redirectUri}`;\n\nconst app = createApp({\n    apiKey: process.env.REACT_APP_API_KEY,\n    shopOrigin: shopOrigin\n});\n\nexport default class AppInstall extends Component {\n    componentDidMount() {\n        if (window.top === window.self) {\n            window.location.assign(permissionUrl);\n        } else {\n            Redirect.create(app).dispatch(Redirect.Action.REMOTE, permissionUrl);\n        }\n    }\n\n    render() {\n        return (\n            <div></div>\n        )\n    }\n}","import React, { Component } from 'react';\nimport createApp from '@shopify/app-bridge';\nimport { Cart, Pos } from \"@shopify/app-bridge/actions\";\n\nconst requestUrl = new URL(window.location.href);\nconst shopOrigin = requestUrl.searchParams.get('shop');\n// Creating a instance for the shop sdk.\nconst app = createApp({\n    apiKey: process.env.REACT_APP_API_KEY,\n    shopOrigin: shopOrigin\n});\n\nconst FEE_LINE_ITEM_TITLE = 'A&E 2% Fee';\nconst FEE_PERCENT = 0.02;\n\n// Creating a instance for the cart.\nconst cart = Cart.create(app);\n\nconst cartUpdatedHandler = cart.subscribe(Cart.Action.UPDATE, function (payload) {\n    cartUpdatedHandler();\n    // Getting all the line items from the cart response payload.\n    const lineItems = payload.data.lineItems;\n\n    // Looping through the line items to finding corresponding line item for fee.\n    let feeLineItemIndex = -1;\n    let feeLineItem = null;\n    let subtotal = payload.data.subtotal;\n    lineItems.map((item, index) => {\n        if (item.title === FEE_LINE_ITEM_TITLE) {\n            feeLineItemIndex = index;\n            feeLineItem = item;\n            return true;\n        }\n    });\n\n    // If Present deleting the existing one.\n    if (feeLineItemIndex > -1) {\n        subtotal = subtotal - feeLineItem.price;\n        cart.dispatch(Cart.Action.REMOVE_LINE_ITEM, {\n            index: feeLineItemIndex\n        });\n    }\n    // Adding a line item for 2% percent fee.\n    cart.dispatch(Cart.Action.ADD_LINE_ITEM, {\n        data: {\n            price: parseFloat(subtotal) * FEE_PERCENT,\n            quantity: 1,\n            title: FEE_LINE_ITEM_TITLE,\n            taxable: false\n        }\n    });\n\n    // Closing the webview after adding the fee line item.\n    const pos = Pos.create(app);\n    pos.dispatch(Pos.ActionType.CLOSE);\n});\ncart.dispatch(Cart.Action.FETCH);\n\nexport default class AppMain extends Component {\n    render() {\n        return (\n            <div></div>\n        )\n    }\n}","import React from \"react\";\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route\n} from \"react-router-dom\";\n\nimport AppInstall from './AppInstall';\nimport AppMain from './AppMain';\n\nexport default function App() {\n  return (\n    <Router>\n      <div>\n        {/* A <Switch> looks through its children <Route>s and\n            renders the first one that matches the current URL. */}\n        <Switch>\n          <Route path={process.env.PUBLIC_URL + \"/install\"} component={AppInstall} />\n          <Route path={process.env.PUBLIC_URL + \"/cart\"} component={AppMain} />\n        </Switch>\n      </div>\n    </Router>\n  );\n}\n\n\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}